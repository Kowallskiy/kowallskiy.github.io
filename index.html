<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TradiQuant</title>
  <link rel="icon" type="image/x-icon" href="icon.ico">
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

  <style>

    :root {
      --tq-accent: #3a5eff;
      --tq-bg: #fbfcff;
      --tq-card: #fff;
      --tq-text: #0f1724;
      --tq-muted: #6b7280;
      --tq-radius: 14px;
      --tq-shadow: 0 8px 20px rgba(15,23,36,0.06);
    }
    .tq-howitworks { padding: 56px 18px; background: var(--tq-bg); font-family: 'Montserrat', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; }
    .tq-container { max-width: 1200px; margin: 0 auto; }
    .tq-heading { text-align: center; margin-bottom: 28px; }
    .tq-kicker { color: var(--tq-accent); font-weight:700; letter-spacing: .6px; }
    .tq-lead { color:var(--tq-muted); margin-top:10px; max-width:820px; margin-left:auto; margin-right:auto; }

    .tq-steps-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 24px; }
    @media (max-width: 1000px) { .tq-steps-grid { grid-template-columns: repeat(2,1fr); } }
    @media (max-width: 640px) { .tq-steps-grid { grid-template-columns: 1fr; } }

    .tq-step-card { background: var(--tq-card); border-radius: var(--tq-radius); box-shadow: var(--tq-shadow); padding: 18px; display: flex; gap:12px; align-items:flex-start; transition: transform .18s ease, box-shadow .18s ease; outline: none; cursor: pointer; }
    .tq-step-card:focus, .tq-step-card:hover { transform: translateY(-6px); box-shadow: 0 18px 40px rgba(15,23,36,0.09); }
    .tq-step-media { width: 64px; height: 64px; border-radius: 10px; display:flex; align-items:center; justify-content:center; background: linear-gradient(180deg, rgba(58,94,255,0.09), rgba(58,94,255,0.02)); color: var(--tq-accent); flex-shrink:0; }
    .tq-icon { width:36px; height:36px; }

    .tq-step-body { flex:1; }
    .tq-step-meta { font-size: 12px; color:var(--tq-accent); font-weight:700; letter-spacing:.6px; }
    .tq-step-body h3 { margin:6px 0 8px 0; font-size:18px; color:var(--tq-text); }
    .tq-step-body p { margin:0; color:var(--tq-muted); font-size:14px; line-height:1.45; }
    .tq-step-img { margin-top:12px; width:100%; border-radius:10px; background:#f5f7ff; height:120px; object-fit:cover; display:block; }

    .tq-report-actions { margin-top:12px; display:flex; gap:8px; }
    .tq-btn { padding:8px 12px; border-radius:8px; border:1px solid rgba(15,23,36,0.06); background:white; font-weight:600; cursor:pointer; }
    .tq-btn-primary { background:var(--tq-accent); color:white; border:none; }

    .tq-cta { text-align:center; margin-top:28px; }
    .tq-cta-btn { display:inline-block; padding:12px 20px; border-radius:12px; background:var(--tq-accent); color:white; text-decoration:none; font-weight:700; box-shadow: 0 10px 30px rgba(58,94,255,0.12); }

    .tq-modal { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(3,6,23,0.45); z-index: 1200; padding: 28px; }
    .tq-modal.open { display: flex; }
    .tq-modal-content { width: 100%; max-width: 980px; background: white; border-radius: 14px; box-shadow: 0 30px 80px rgba(3,6,23,0.3); overflow: hidden; display: flex; flex-direction: column; }
    @media (max-width: 980px) { .tq-modal-content { max-width: 720px; } }
    .tq-modal-left { padding: 18px 18px 24px 18px; display:flex; flex-direction:column; gap:12px; }
    .tq-modal-title { font-size:20px; margin:0 0 6px 0; color:var(--tq-text); }

    .tq-modal-desc { margin:0; color:var(--tq-text); line-height:1.6; font-size:15px; }
    .tq-modal-img { width:100%; height:auto; max-height:60vh; object-fit:contain; border-radius:10px; background:#f5f7ff; display:block; }
    .tq-modal-actions { margin-top:12px; display:flex; gap:8px; flex-wrap:wrap; }
    .tq-modal-meta { font-size:12px; color:var(--tq-muted); margin-top:8px; }

    .tq-modal-close { position: absolute; right: 36px; top: 28px; background: transparent; border: none; color: white; font-size: 26px; cursor: pointer; }

    .tq-step-card.tq-active { outline: 2px solid rgba(58,94,255,0.12); box-shadow: 0 20px 50px rgba(58,94,255,0.06); }

    .tq-modal [tabindex="-1"]:focus { outline: none; }
    
    /* Language Switcher Styles */
    .lang-switcher {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .lang-btn {
      padding: 6px 14px;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 20px;
      background: rgba(255,255,255,0.05);
      color: #fff;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'Montserrat', Arial, sans-serif;
    }
    .lang-btn:hover {
      background: rgba(255,255,255,0.1);
      border-color: rgba(255,255,255,0.3);
    }
    .lang-btn.active {
      background: rgba(255,255,255,0.18);
      border-color: rgba(255,255,255,0.4);
    }
    .header-controls {
      display: flex;
      align-items: center;
      gap: 16px;
    }
  </style>
  <!-- Responsive math: safe for desktop, phone-friendly -->
<style>
  /* keep desktop unchanged; only small-screen adjustments kick in below */
  .formula-card {
    overflow-x: auto;                 /* allow horizontal scroll on narrow screens */
    -webkit-overflow-scrolling: touch;/* smooth scrolling on iOS */
    min-width: 0;                     /* flexbox safety */
    box-sizing: border-box;
  }

  /* Make MathJax SVGs respect container width */
  .math.display svg,
  .math.display .mjx-svg {
    max-width: 100% !important;
    height: auto !important;
    width: auto !important;
    display: block;
  }

  /* Slightly smaller math on tiny screens so more fits */
  @media (max-width: 640px) {
    .math.display { font-size: 16px; } /* only affects phones */
    .formula-card { padding: 10px; }
    /* optional: thin scrollbar for horizontal scroll */
    .formula-card::-webkit-scrollbar { height: 6px; }
    .formula-card::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.12); border-radius: 6px; }
  }
</style>

<script>
  (function adaptMath(){
    // Safety: do nothing if no math nodes found
    function apply() {
      const nodes = document.querySelectorAll('.math.display');
      if (!nodes.length) return;
      nodes.forEach(el => {
        el.style.display = 'block';
        el.style.boxSizing = 'border-box';
        // handle MathJax-produced SVG
        const svg = el.querySelector('svg');
        if (svg) {
          svg.style.maxWidth = '100%';
          svg.style.width = 'auto';
          svg.style.height = 'auto';
          svg.setAttribute('preserveAspectRatio', 'xMinYMid meet');
        }
        const mjx = el.querySelector('.mjx-svg');
        if (mjx) {
          mjx.style.maxWidth = '100%';
          mjx.style.width = 'auto';
          mjx.style.height = 'auto';
        }
      });
    }

    // Run after MathJax has typeset (if present)
    if (window.MathJax && MathJax.typesetPromise) {
      MathJax.typesetPromise().then(apply).catch(()=>{ apply(); });
      // Also attempt again after MathJax startup if available
      if (MathJax.startup && MathJax.startup.promise) {
        MathJax.startup.promise.then(()=>MathJax.typesetPromise().then(apply).catch(()=>{}));
      }
    } else {
      // If MathJax not present, apply once on load
      window.addEventListener('load', apply);
    }

    // Debounced resize to reapply layout on orientation change / narrow->wide
    let _t = null;
    window.addEventListener('resize', () => {
      clearTimeout(_t);
      _t = setTimeout(apply, 120);
    });
  })();
  </script>

</head>
<body>
  <div class="static-header" id="static-header">
    <div class="header-content">
      <span class="brand">TradiQuant</span>
      <!-- <div class="header-controls">
        <div class="lang-switcher">
          <button class="lang-btn active" data-lang="en">EN</button>
          <button class="lang-btn" data-lang="ru">RU</button>
        </div>
        <a href="https://t.me/dan_surnin" target="_blank" class="contact-btn" data-i18n="contact">Contact me</a>
      </div> -->
    </div>
  </div>
  <header class="header" id="main-header">
    <div class="header-content">
      <span class="brand">TradiQuant</span>
      <div class="header-controls">
        <div class="lang-switcher">
          <button class="lang-btn active" data-lang="en">EN</button>
          <button class="lang-btn" data-lang="ru">RU</button>
        </div>
        <a href="https://t.me/dan_surnin" target="_blank" class="contact-btn" data-i18n="contact">Contact me</a>
      </div>
    </div>
  </header>

  <section class="hero">
    <div class="hero-bg"></div>
    <div class="hero-text">
      <span class="hero-line hero-line1" data-i18n="hero.line1">AI Trading Platform</span>
      <span class="hero-line hero-line2" data-i18n="hero.line2">Train AI models</span>
      <span class="hero-line hero-line3" data-i18n="hero.line3">Run backtests</span>
      <span class="hero-line hero-line4" data-i18n="hero.line4">Deploy for live trading</span>
    </div>
    <div class="hero-sub" data-i18n="hero.sub">AND ALL WITHOUT WRITING A SINGLE LINE OF CODE</div>
  </section>

  <section class="video-section">
    <div class="video-badge" data-i18n="video.badge">Prototype Demo</div>
    <div class="video-frame">
      <div class="video-overlay">
        <span class="video-demo-label"><svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;margin-right:6px;"><circle cx="11" cy="11" r="11" fill="#3a5eff"/><polygon points="9,7 16,11 9,15" fill="#fff"/></svg><span data-i18n="video.demo">Demo</span></span>
      </div>
      <div class="video-grid-overlay" id="video-grid-overlay">
        <svg class="video-grid-svg" viewBox="0 0 100 56" preserveAspectRatio="none">

          <line x1="10" y1="0" x2="10" y2="56" />
          <line x1="30" y1="0" x2="30" y2="56" />
          <line x1="50" y1="0" x2="50" y2="56" />
          <line x1="70" y1="0" x2="70" y2="56" />
          <line x1="90" y1="0" x2="90" y2="56" />

          <line x1="0" y1="14" x2="100" y2="14" />
          <line x1="0" y1="28" x2="100" y2="28" />
          <line x1="0" y1="42" x2="100" y2="42" />
        </svg>
      </div>
      <img class="demo-gif-preview" id="demo-gif-preview" src="images/demo.jpg" alt="Demo preview gif" />
      
      <video id="demo-video" class="demo-video" width="960" preload="metadata" controls playsinline poster="images/demo-poster.jpg">
        <source src="demo.mp4" type="video/mp4">
        <track kind="subtitles" label="Русский" srclang="ru" src="subs_ru.vtt" default>
        Ваш браузер не поддерживает видео.
      </video>

      <div class="video-predemo-overlay" id="video-predemo">
        <button class="video-play-btn" id="video-play-btn" aria-label="Play demo video" tabindex="0">
          <svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="28" cy="28" r="28" fill="#3a5eff" fill-opacity="0.85"/>
            <polygon points="23,18 40,28 23,38" fill="#fff"/>
          </svg>
        </button>
      </div>
    </div>
  </section>

  <div class="video-cta" aria-hidden="false">
    <a
      class="try-demo-btn"
      href="http://98.82.130.11/"
      target="_blank"
      rel="noopener noreferrer"
      data-i18n="video.try_demo"
      aria-label="Try TradiQuant demo — opens in a new tab"
    >
      <!-- Иконка play + текст -->
      <svg class="try-demo-icon" width="40" height="40" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <circle cx="12" cy="12" r="12" fill="currentColor" />
        <path d="M10 8l6 4-6 4z" fill="#fff"/>
      </svg>
      <span class="try-demo-text">Try demo</span>
    </a>

    <!-- Доп. кнопка — Learn more (опционально) -->
    <a class="try-demo-secondary" href="#tq-howitworks" data-i18n="video.learn_more" aria-label="Learn more about TradiQuant">
      Learn more
    </a>
  </div>

  <section class="info-section">
    <div class="info-card">
      <div class="info-columns">
        <div class="info-left">
          <div class="info-label" data-i18n="info.label">ABOUT THE PLATFORM</div>
          <h2 data-i18n="info.title">All-in-one AI Trading Platform</h2>
          <p data-i18n="info.description">Train, backtest, and deploy AI trading strategies with ease. This application empowers you to build, analyze, and optimize your trading ideas—no coding required.</p>
        </div>
        <div class="info-right">
          <ul class="stats-list">
            <li class="stat-item">
              <span class="stat-number">450+ assets</span>
              <div class="stat-desc" data-i18n="stats.assets">supported stocks, crypto and currency pairs</div>
            </li>
            <li class="stat-divider"></li>
            <li class="stat-item">
              <span class="stat-number">50+ features</span>
              <div class="stat-desc" data-i18n="stats.features">to train your models</div>
            </li>
            <li class="stat-divider"></li>
            <li class="stat-item">
              <span class="stat-number">19 AI models</span>
              <div class="stat-desc" data-i18n="stats.models">and each highly customizable</div>
            </li>
            <li class="stat-item">
                <span class="stat-number">AI Agents</span>
                <div class="stat-desc" data-i18n="stats.agents">to help you analyze and improve your AI models and backtests</div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <section class="different-section">
    <div class="different-columns">
      <div class="different-left">
        <div class="info-label" data-i18n="different.label">WHY THIS PLATFORM IS UNIQUE</div>
        <h2 data-i18n="different.title">Every deployment is unique.<br>Every model is yours.</h2>
        <p data-i18n="different.description">This platform ensures that every AI model you train is one-of-a-kind, thanks to a very low level of models' customization and a vast feature set. Deploy seamlessly to brokers like Alpaca, and enjoy fully automated, reproducible pipelines. Your strategies are never generic—they're as unique as your ideas.</p>
      </div>
      <div class="different-right">
        <ul class="different-stats-list">
          <li class="different-stat-item">
            <span class="different-stat-number">100%</span>
            <span class="different-stat-label" data-i18n="different.stat1.label">Customizable pipelines</span>
            <div class="different-stat-desc" data-i18n="different.stat1.desc">from data to deployment</div>
          </li>
          <li class="different-stat-divider"></li>
          <li class="different-stat-item">
            <span class="different-stat-number">Infinity</span>
            <span class="different-stat-label" data-i18n="different.stat2.label">Unique model/strategy combos</span>
            <div class="different-stat-desc" data-i18n="different.stat2.desc">no two runs are the same</div>
          </li>
          <li class="different-stat-divider"></li>
          <li class="different-stat-item">
            <span class="different-stat-number">Alpaca</span>
            <span class="different-stat-label" data-i18n="different.stat3.label">Broker integration</span>
            <div class="different-stat-desc" data-i18n="different.stat3.desc">deploy live in seconds</div>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <section class="tq-howitworks" id="tq-howitworks" aria-labelledby="tq-howitworks-title">
    <div class="tq-container">
      <div class="tq-heading">
        <div class="tq-kicker" data-i18n="howitworks.kicker">How it works</div>
        <h2 id="tq-howitworks-title" data-i18n="howitworks.title">Train. Backtest. Deploy — in 8 simple steps.</h2>
        <p class="tq-lead" data-i18n="howitworks.lead">From personalized onboarding to live deployment — a fully managed pipeline that removes engineering friction so you can focus on ideas and risk management. Click on a step to view more details.</p>
      </div>

      <div class="tq-steps-grid" role="list">
        <!-- STEP 0 -->
        <article class="tq-step-card" role="listitem" tabindex="0" aria-labelledby="tq-step0-title" data-step="0">
          <div class="tq-step-media">
            <svg class="tq-icon" viewBox="0 0 48 48" aria-hidden="true"><rect x="6" y="10" width="36" height="28" rx="3" fill="none" stroke="currentColor" stroke-width="2"/><circle cx="18" cy="22" r="2"/><circle cx="26" cy="22" r="2"/><circle cx="34" cy="22" r="2"/></svg>
          </div>
          <div class="tq-step-body">
            <div class="tq-step-meta">Step 0</div>
            <h3 id="tq-step0-title" data-i18n="steps.step0.title">Personalized onboarding</h3>
            <p data-i18n="steps.step0.desc">Answer a few guided questions (goals, experience, risk). Our AI tailors model & training advice to your profile — so the platform recommends what actually fits you.</p>
            <img src="images/step_0.jpg" alt="Onboarding questions preview" class="tq-step-img" />
          </div>
        </article>

        <!-- STEP 1 -->
        <article class="tq-step-card" role="listitem" tabindex="0" aria-labelledby="tq-step1-title" data-step="1">
          <div class="tq-step-media">
            <svg class="tq-icon" viewBox="0 0 48 48" aria-hidden="true"><path d="M8 36h32" stroke="currentColor" stroke-width="2" fill="none"/><rect x="10" y="10" width="12" height="16" rx="2" fill="none" stroke="currentColor" stroke-width="2"/><rect x="26" y="10" width="12" height="12" rx="2" fill="none" stroke="currentColor" stroke-width="2"/></svg>
          </div>
          <div class="tq-step-body">
            <div class="tq-step-meta">Step 1</div>
            <h3 id="tq-step1-title" data-i18n="steps.step1.title">Choose an ML model</h3>
            <p data-i18n="steps.step1.desc">Pick from curated models (XGBoost, LSTM, Transformer, ensemble). Each has recommended presets and a clear expectation of behavior and latency.</p>
            <img src="images/step_1.jpg" alt="Model selection screen" class="tq-step-img" />
          </div>
        </article>

        <!-- STEP 2 -->
        <article class="tq-step-card" role="listitem" tabindex="0" aria-labelledby="tq-step2-title" data-step="2">
          <div class="tq-step-media">
            <svg class="tq-icon" viewBox="0 0 48 48" aria-hidden="true"><circle cx="16" cy="20" r="6" fill="none" stroke="currentColor" stroke-width="2"/><circle cx="32" cy="20" r="6" fill="none" stroke="currentColor" stroke-width="2"/><rect x="8" y="30" width="32" height="6" rx="2" fill="none" stroke="currentColor" stroke-width="2"/></svg>
          </div>
          <div class="tq-step-body">
            <div class="tq-step-meta">Step 2</div>
            <h3 id="tq-step2-title" data-i18n="steps.step2.title">Select assets or a portfolio</h3>
            <p data-i18n="steps.step2.desc">Choose assets (stocks/crypto) or select one of our prebuilt portfolios. Want custom? Build one — the platform will suggest diversification fixes automatically.</p>
            <img src="images/step_2.jpg" alt="Portfolio selection" class="tq-step-img" />
          </div>
        </article>

        <!-- STEP 3 -->
        <article class="tq-step-card" role="listitem" tabindex="0" aria-labelledby="tq-step3-title" data-step="3">
          <div class="tq-step-media">
            <svg class="tq-icon" viewBox="0 0 48 48" aria-hidden="true"><path d="M10 12h28v8H10zM10 28h28v8H10z" stroke="currentColor" stroke-width="2" fill="none"/></svg>
          </div>
          <div class="tq-step-body">
            <div class="tq-step-meta">Step 3</div>
            <h3 id="tq-step3-title" data-i18n="steps.step3.title">Choose features (presets or custom)</h3>
            <p data-i18n="steps.step3.desc">Use 50+ ready features (momentum, volume signals, macro bars) or define your own. Each feature includes a short explanation and recommended lags.</p>
            <img src="images/step_3.jpg" alt="Feature selection" class="tq-step-img" />
          </div>
        </article>

        <!-- STEP 4 -->
        <article class="tq-step-card" role="listitem" tabindex="0" aria-labelledby="tq-step4-title" data-step="4">
          <div class="tq-step-media">
            <svg class="tq-icon" viewBox="0 0 48 48" aria-hidden="true"><path d="M12 24h24" stroke="currentColor" stroke-width="2" fill="none"/><path d="M12 16h10" stroke="currentColor" stroke-width="2" fill="none"/><path d="M26 32h10" stroke="currentColor" stroke-width="2" fill="none"/></svg>
          </div>
          <div class="tq-step-body">
            <div class="tq-step-meta">Step 4</div>
            <h3 id="tq-step4-title" data-i18n="steps.step4.title">Hyperparameters — manual or AI-assisted</h3>
            <p data-i18n="steps.step4.desc">Manually adjust or ask the AI Assistant to propose a hyperparameter set tuned to your assets and profile — saving you hours of trial-and-error.</p>
            <img src="images/step_4.jpg" alt="Hyperparameters UI" class="tq-step-img" />
          </div>
        </article>

        <!-- STEP 5 -->
        <article class="tq-step-card" role="listitem" tabindex="0" aria-labelledby="tq-step5-title" data-step="5">
          <div class="tq-step-media">
            <svg class="tq-icon" viewBox="0 0 48 48" aria-hidden="true"><path d="M8 12h32v8H8zM14 30h20v8H14z" stroke="currentColor" stroke-width="2" fill="none"/></svg>
          </div>
          <div class="tq-step-body">
            <div class="tq-step-meta">Step 5</div>
            <h3 id="tq-step5-title" data-i18n="steps.step5.title">Strategy & backtest settings</h3>
            <p data-i18n="steps.step5.desc">Configure position sizing, number of concurrent trades, capital, slippage, and risk tolerance. Pick AI Agents to analyze backtests and suggest improvements.</p>
            <img src="images/step_5.jpg" alt="Strategy and backtest settings" class="tq-step-img" />
          </div>
        </article>

        <!-- STEP 6 -->
        <article class="tq-step-card" role="listitem" tabindex="0" aria-labelledby="tq-step6-title" data-step="6">
          <div class="tq-step-media">
            <svg class="tq-icon" viewBox="0 0 48 48" aria-hidden="true"><path d="M8 12h32v24H8z" stroke="currentColor" stroke-width="2" fill="none"/><polyline points="14,18 22,26 34,14" stroke="currentColor" stroke-width="2" fill="none"/></svg>
          </div>
          <div class="tq-step-body">
            <div class="tq-step-meta">Step 6</div>
            <h3 id="tq-step6-title" data-i18n="steps.step6.title">Backtest analysis & PDF report</h3>
            <p data-i18n="steps.step6.desc">Interactive dashboards + an AI-written executive summary. Export a professional PDF report with full metrics and trade logs for due-diligence or compliance.</p>
            <img src="images/step_6.jpg" alt="Backtest report example" class="tq-step-img" />
          </div>
        </article>

        <!-- STEP 7 -->
        <article class="tq-step-card" role="listitem" tabindex="0" aria-labelledby="tq-step7-title" data-step="7">
          <div class="tq-step-media">
            <svg class="tq-icon" viewBox="0 0 48 48" aria-hidden="true"><path d="M12 18h24v12H12z" stroke="currentColor" stroke-width="2" fill="none"/><path d="M20 30v6" stroke="currentColor" stroke-width="2"/><path d="M28 30v6" stroke="currentColor" stroke-width="2" fill="none"/></svg>
          </div>
          <div class="tq-step-body">
            <div class="tq-step-meta">Step 7</div>
            <h3 id="tq-step7-title" data-i18n="steps.step7.title">Deploy to live trading (Alpaca)</h3>
            <p data-i18n="steps.step7.desc">Pick the trained model, enter your Alpaca API key & secret, choose paper or live, and Deploy. The platform handles execution, limits, and monitoring.</p>
            <img src="images/step_7.jpg" alt="Deploy modal with Alpaca keys" class="tq-step-img" />
          </div>
        </article>
      </div>

      <div class="tq-cta">
        <a
          class="tq-cta-btn"
          href="http://98.82.130.11/"
          target="_blank"
          rel="noopener noreferrer"
          data-i18n="howitworks.cta"
          aria-label="Get started — try a demo (opens in a new tab)"
        >
          Get started — try a demo
        </a>
      </div>
    </div>
  </section>
  <!-- ---------- END: TradiQuant How it works section ---------- -->

  <!-- Modal: large image above description -->
  <div class="tq-modal" id="tq-modal" role="dialog" aria-modal="true" aria-labelledby="tq-modal-title" aria-hidden="true">
    <button class="tq-modal-close" id="tq-modal-close" aria-label="Close dialog">&times;</button>
    <div class="tq-modal-content" role="document">
      <div class="tq-modal-left">
        <img src="" alt="" class="tq-modal-img" id="tq-modal-img" />
        <h3 class="tq-modal-title" id="tq-modal-title">Title</h3>
        <p class="tq-modal-desc" id="tq-modal-desc">Long description</p>
        <div class="tq-modal-actions" id="tq-modal-actions"></div>
        <div class="tq-modal-meta" id="tq-modal-meta"></div>
      </div>
    </div>
  </div>

  <section class="tq-report-images" aria-labelledby="tq-report-images-title" style="padding:32px 18px;">
    <div style="max-width:1100px;margin:0 auto;">
      <h3 id="tq-report-images-title" style="margin:0 0 12px 0;color:#0f1724;font-family:Montserrat,system-ui,Arial,sans-serif;" data-i18n="reports.title">Report excerpt & Alpaca PnL</h3>
      <p style="margin:0 0 18px 0;color:#6b7280;" data-i18n="reports.description">Scroll down to explore a preview from the full report generated by the platform. Click any image to view it in detail.</p>

      <div style="display:flex;flex-direction:column;gap:22px;align-items:center;">

        <figure class="tq-report-figure" style="width:100%;margin:0;display:flex;flex-direction:column;align-items:center;">
          <img class="tq-report-img" src="report_page_preview.png" alt="Report excerpt — summary and charts" style="width:100%;max-width:1100px;height:auto;border-radius:10px;object-fit:contain;box-shadow:0 10px 30px rgba(15,23,36,0.06);cursor:pointer;">
          <figcaption style="margin-top:8px;color:#6b7280;font-size:13px;" data-i18n="reports.caption1">Report excerpt — summary & charts</figcaption>
        </figure>

        <figure class="tq-report-figure" style="width:100%;margin:0;display:flex;flex-direction:column;align-items:center;">
          <img class="tq-report-img" src="alpaca_pnl.jpg" alt="Alpaca PnL screenshot" style="width:100%;max-width:1100px;height:auto;border-radius:10px;object-fit:contain;box-shadow:0 10px 30px rgba(15,23,36,0.06);cursor:pointer;">
          <figcaption style="margin-top:8px;color:#6b7280;font-size:13px;" data-i18n="reports.caption2">Alpaca PnL — concluding results</figcaption>
        </figure>
      </div>
    </div>
  </section>

  <div id="tq-report-lightbox" class="tq-report-lightbox" aria-hidden="true" style="display:none;position:fixed;inset:0;z-index:1500;background:rgba(3,6,23,0.7);align-items:center;justify-content:center;padding:24px;">
    <button id="tq-report-lightbox-close" aria-label="Close preview" style="position:absolute;right:22px;top:18px;background:transparent;border:none;color:#fff;font-size:28px;cursor:pointer;">&times;</button>
    <div style="max-width:1200px;width:100%;max-height:90vh;overflow:auto;border-radius:10px;box-shadow:0 30px 80px rgba(3,6,23,0.4);background:#fff;padding:18px;">
      <img id="tq-report-lightbox-img" src="" alt="" style="width:100%;height:auto;display:block;border-radius:8px;object-fit:contain;">
      <div id="tq-report-lightbox-caption" style="margin-top:10px;color:#0f1724;font-size:14px;"></div>
    </div>
  </div>

  <style>
    @media (max-width: 880px) {
      .tq-report-images { padding-left:12px !important; padding-right:12px !important; }
    }
  </style>

  <script>
  (function(){
    const imgs = Array.from(document.querySelectorAll('.tq-report-img'));
    const lightbox = document.getElementById('tq-report-lightbox');
    const lightboxImg = document.getElementById('tq-report-lightbox-img');
    const lightboxCaption = document.getElementById('tq-report-lightbox-caption');
    const lightboxClose = document.getElementById('tq-report-lightbox-close');
    let lastFocused = null;

    if (!imgs.length || !lightbox || !lightboxImg) return;

    imgs.forEach(img => {
      img.setAttribute('tabindex','0');

      img.addEventListener('click', (e) => {
        lastFocused = document.activeElement;
        const src = img.getAttribute('src') || '';
        const alt = img.getAttribute('alt') || '';
        lightboxImg.src = src;
        lightboxImg.alt = alt;
        lightboxCaption.textContent = alt;
        lightbox.style.display = 'flex';
        lightbox.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
        lightboxClose.focus();
      });

      img.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          img.click();
        }
      });
    });

    function closeLightbox() {
      lightbox.style.display = 'none';
      lightbox.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
      lightboxImg.src = '';
      if (lastFocused && typeof lastFocused.focus === 'function') lastFocused.focus();
      lastFocused = null;
    }

    lightboxClose.addEventListener('click', closeLightbox);

    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLightbox();
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && lightbox.getAttribute('aria-hidden') === 'false') {
        closeLightbox();
      }
    });
  })();
  </script>

  <!-- ======= First-person trading-focused technical article (replace previous article block) ======= -->
  <section class="tq-article tq-article--dark" id="tq-article" aria-labelledby="tq-article-title" style="padding:44px 18px;">
    <!-- MathJax loader (safe if MathJax not already loaded) -->
    <script>
      if (!window.MathJax) {
        window.MathJax = {
          tex: {
            inlineMath: [['\\(','\\)'], ['$', '$']],
            displayMath: [['$$','$$']],
            processEscapes: true
          },
          svg: { fontCache: 'global' },
          options: { skipHtmlTags: ['script','noscript','style','textarea','pre'] }
        };
        (function(){ var s=document.createElement('script'); s.src='https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js'; s.async=true; document.head.appendChild(s); })();
      }
    </script>

    

    <!-- MathJax typeset trigger -->
    <script>
      (function waitForMathJax(){
        if (window.MathJax && MathJax.typesetPromise) {
          MathJax.typesetPromise().catch(function(err){ console.warn('MathJax typeset failed', err); });
        } else {
          setTimeout(waitForMathJax, 300);
        }
      })();
    </script>

    <style>
      .tq-article--dark { background: linear-gradient(180deg,#061025 0%, rgba(6,16,37,0.6) 100%); border-top: 1px solid rgba(255,255,255,0.02); border-bottom: 1px solid rgba(255,255,255,0.02); }
      .formula-card { transition: transform .12s ease, box-shadow .12s ease; }
      .formula-card:hover { transform: translateY(-6px); box-shadow: 0 18px 40px rgba(0,0,0,0.6); }
      .tq-article pre { font-size:13px; line-height:1.45; }
      .tq-article img { max-width:100%; display:block; }
    </style>
  </section>
  <!-- ======= End first-person article ======= -->




  <footer class="site-footer">
    © TradiQuant 2026 | Built by Denis Surnin | Telegram: @dan_surnin
  </footer>

  <div id="telegram-modal" class="telegram-modal">
    <div class="telegram-modal-content">
      <span class="telegram-modal-close" id="telegram-modal-close">&times;</span>
      <h3 data-i18n="telegram.title">Contact me on Telegram</h3>
      <p>@dan_surnin</p>
      <a href="https://t.me/dan_surnin" target="_blank" class="telegram-link-btn" data-i18n="telegram.button">Link to Telegram</a>
    </div>
  </div>

  <script>
    window.addEventListener('scroll', function() {
      const header = document.getElementById('main-header');
      const staticHeader = document.getElementById('static-header');
      if (window.scrollY > 40) {
        header.classList.add('header-visible');
        staticHeader.classList.add('static-header-hide');
      } else {
        header.classList.remove('header-visible');
        staticHeader.classList.remove('static-header-hide');
      }
    });

    const predemo = document.getElementById('video-predemo');
    const playBtn = document.getElementById('video-play-btn');
    const video = document.getElementById('demo-video');
    const gridOverlay = document.getElementById('video-grid-overlay');
    const gifPreview = document.getElementById('demo-gif-preview');
    if (predemo && playBtn && video) {
      playBtn.addEventListener('click', function() {
        predemo.style.display = 'none';
        if(gridOverlay) gridOverlay.classList.add('hide');
        if(gifPreview) gifPreview.style.display = 'none';
        video.play();
      });
      video.addEventListener('play', function() {
        predemo.style.display = 'none';
        if(gridOverlay) gridOverlay.classList.add('hide');
        if(gifPreview) gifPreview.style.display = 'none';
      });
      video.addEventListener('pause', function() {
        if(video.currentTime === 0 && gridOverlay) gridOverlay.classList.remove('hide');
        if(video.currentTime === 0 && gifPreview) gifPreview.style.display = '';
      });
    }

    const statItems = document.querySelectorAll('.different-stat-item');
    const observer = new window.IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        } else {
          entry.target.classList.remove('visible');
        }
      });
    }, { threshold: 0.3 });
    statItems.forEach(item => observer.observe(item));

    const contactBtns = document.querySelectorAll('.contact-btn');
    const telegramModal = document.getElementById('telegram-modal');
    const telegramModalClose = document.getElementById('telegram-modal-close');
    contactBtns.forEach(btn => {
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        telegramModal.style.display = 'flex';
      });
    });
    telegramModalClose.addEventListener('click', function() {
      telegramModal.style.display = 'none';
    });
    window.addEventListener('click', function(e) {
      if (e.target === telegramModal) {
        telegramModal.style.display = 'none';
      }
    });
  </script>

  <script>
    // Translation system
    const translations = {
      en: {
        contact: 'Contact me',
        'hero.line1': 'AI Trading Platform',
        'hero.line2': 'Train AI models',
        'hero.line3': 'Run backtests',
        'hero.line4': 'Deploy for live trading',
        'hero.sub': 'AND ALL WITHOUT WRITING A SINGLE LINE OF CODE',
        'video.badge': 'Prototype Demo',
        'video.demo': 'Demo',
        'info.label': 'ABOUT THE PLATFORM',
        'info.title': 'All-in-one AI Trading Platform',
        'info.description': 'Train, backtest, and deploy AI trading strategies with ease. This application empowers you to build, analyze, and optimize your trading ideas—no coding required.',
        'stats.assets': 'supported stocks, crypto and currency pairs',
        'stats.features': 'to train your models',
        'stats.models': 'and each highly customizable',
        'stats.agents': 'to help you analyze and improve your AI models and backtests',
        'different.label': 'WHY THIS PLATFORM IS UNIQUE',
        'different.title': 'Every deployment is unique.<br>Every model is yours.',
        'different.description': 'This platform ensures that every AI model you train is one-of-a-kind, thanks to a very low level of models\' customization and a vast feature set. Deploy seamlessly to brokers like Alpaca, and enjoy fully automated, reproducible pipelines. Your strategies are never generic—they\'re as unique as your ideas.',
        'different.stat1.label': 'Customizable pipelines',
        'different.stat1.desc': 'from data to deployment',
        'different.stat2.label': 'Unique model/strategy combos',
        'different.stat2.desc': 'no two runs are the same',
        'different.stat3.label': 'Broker integration',
        'different.stat3.desc': 'deploy live in seconds',
        'howitworks.kicker': 'How it works',
        'howitworks.title': 'Train. Backtest. Deploy — in 8 simple steps.',
        'howitworks.lead': 'From personalized onboarding to live deployment — a fully managed pipeline that removes engineering friction so you can focus on ideas and risk management. Click on a step to view more details.',
        'howitworks.cta': 'Get started — try a demo',
        'steps.step0.title': 'Personalized onboarding',
        'steps.step0.desc': 'Answer a few guided questions (goals, experience, risk). Our AI tailors model & training advice to your profile — so the platform recommends what actually fits you.',
        'steps.step1.title': 'Choose an ML model',
        'steps.step1.desc': 'Pick from curated models (XGBoost, LSTM, Transformer, ensemble). Each has recommended presets and a clear expectation of behavior and latency.',
        'steps.step2.title': 'Select assets or a portfolio',
        'steps.step2.desc': 'Choose assets (stocks/crypto) or select one of our prebuilt portfolios. Want custom? Build one — the platform will suggest diversification fixes automatically.',
        'steps.step3.title': 'Choose features (presets or custom)',
        'steps.step3.desc': 'Use 50+ ready features (momentum, volume signals, macro bars) or define your own. Each feature includes a short explanation and recommended lags.',
        'steps.step4.title': 'Hyperparameters — manual or AI-assisted',
        'steps.step4.desc': 'Manually adjust or ask the AI Assistant to propose a hyperparameter set tuned to your assets and profile — saving you hours of trial-and-error.',
        'steps.step5.title': 'Strategy & backtest settings',
        'steps.step5.desc': 'Configure position sizing, number of concurrent trades, capital, slippage, and risk tolerance. Pick AI Agents to analyze backtests and suggest improvements.',
        'steps.step6.title': 'Backtest analysis & PDF report',
        'steps.step6.desc': 'Interactive dashboards + an AI-written executive summary. Export a professional PDF report with full metrics and trade logs for due-diligence or compliance.',
        'steps.step7.title': 'Deploy to live trading (Alpaca)',
        'steps.step7.desc': 'Pick the trained model, enter your Alpaca API key & secret, choose paper or live, and Deploy. The platform handles execution, limits, and monitoring.',
        'reports.title': 'Report excerpt & Alpaca PnL',
        'reports.description': 'Scroll down to explore a preview from the full report generated by the platform. Click any image to view it in detail.',
        'reports.caption1': 'Report excerpt — summary & charts',
        'reports.caption2': 'Alpaca PnL — concluding results',
        'telegram.title': 'Contact me on Telegram',
        'telegram.button': 'Link to Telegram'
      },
      ru: {
        contact: 'Связаться со мной',
        'hero.line1': 'Трейдинговая ИИ платформа',
        'hero.line2': 'Обучайте ИИ модели',
        'hero.line3': 'Проводите бэктесты',
        'hero.line4': 'Запускайте ИИ торговлю',
        'hero.sub': 'И ВСЁ БЕЗ НАПИСАНИЯ НИ ОДНОЙ СТРОКИ КОДА',
        'video.badge': 'Демо прототипа',
        'video.demo': 'Демо',
        'info.label': 'О ПЛАТФОРМЕ',
        'info.title': 'Всё-в-одном: Торговая ИИ платформа',
        'info.description': 'Трейдинг акциями и криптовалютой всегда считался сложным. А автоматизация трейдинга алгоритмами машинного обучения (ИИ) была привилегией ML инженеров, знающих математическую составляющую всех ML алгоритмов и умеющих программировать. Теперь это стало доступно для всех! Обучайте, тестируйте и развертывайте торговые стратегии на основе ИИ с легкостью. Это приложение дает вам возможность создавать, анализировать и оптимизировать ваши торговые идеи — без необходимости программирования.',
        'stats.assets': 'поддерживаемые акции, криптовалюты и валютные пары',
        'stats.features': 'для обучения ваших моделей',
        'stats.models': 'каждая из которых высоко настраиваемая',
        'stats.agents': 'помогают анализировать и улучшать ваши модели ИИ и бэктесты',
        'different.label': 'ПОЧЕМУ ЭТА ПЛАТФОРМА УНИКАЛЬНА',
        'different.title': 'Каждое развертывание уникально.<br>Каждая модель ваша.',
        'different.description': 'Эта платформа гарантирует, что каждая модель ИИ, которую вы обучаете, уникальна благодаря очень высокому уровню настройки моделей и обширному набору функций. Бесшовно развертывайте на брокерских платформах типа Alpaca и наслаждайтесь полностью автоматизированными, воспроизводимыми пайплайнами. Ваши стратегии так же уникальны, как и ваши идеи.',
        'different.stat1.label': 'Настраиваемые пайплайны',
        'different.stat1.desc': 'от данных до развертывания',
        'different.stat2.label': 'Уникальные комбинации моделей/стратегий',
        'different.stat2.desc': 'не бывает двух одинаковых запусков',
        'different.stat3.label': 'Интеграция с брокером',
        'different.stat3.desc': 'развертывание в реальном времени за секунды',
        'howitworks.kicker': 'Как это работает',
        'howitworks.title': 'Обучите. Протестируйте. Разверните — за 8 простых шагов.',
        'howitworks.lead': 'От персонального онбординга до живого развертывания — полноценно управляемый пайплайн, который убирает технические сложности, чтобы вы могли сосредоточиться на идеях и управлении рисками. Нажмите на шаг, чтобы увидеть больше деталей.',
        'howitworks.cta': 'Начните — попробуйте демо',
        'steps.step0.title': 'Персонализированный онбординг',
        'steps.step0.desc': 'Ответьте на несколько направляющих вопросов (цели, опыт, риск). Наш ИИ подстраивает советы по моделям и обучению под ваш профиль — так платформа рекомендует то, что вам действительно подходит.',
        'steps.step1.title': 'Выберите модель ML',
        'steps.step1.desc': 'Выбирайте из реализованных моделей (XGBoost, LSTM, Transformer, ансамбли и т.д.). У каждой есть рекомендуемые предустановки и четкое понимание поведения и задержки.',
        'steps.step2.title': 'Выберите активы или портфель',
        'steps.step2.desc': 'Выбирайте активы (акции/криптовалюты) или используйте один из наших готовых портфелей. Нужен кастомный? Создайте — платформа автоматически предложит исправления для диверсификации.',
        'steps.step3.title': 'Выберите признаки (заранее определенные или кастомные)',
        'steps.step3.desc': 'Используйте более 50 готовых фич (скользящие средние, сигналы объема, макрополосы) или определите свои. Каждая фича включает краткое объяснение.',
        'steps.step4.title': 'Гиперпараметры — вручную или с помощью ИИ',
        'steps.step4.desc': 'Настраивайте параметры вручную или попросите AI-помощника предложить набор гиперпараметров, настроенный под ваши активы и профиль — это сэкономит часы проб и ошибок.',
        'steps.step5.title': 'Настройки стратегии и бэктеста',
        'steps.step5.desc': 'Настройте правила исполнения: количество одновременных длинных/коротких позиций, правила размеров позиций (фиксированные, дробные, Kelly), капитал для бэктеста, предположения о комиссиях/проскальзывании и максимальные пределы просадки. Выберите AI-агентов для анализа результатов бэктеста — они укажут на структурные проблемы, такие как чрезмерная концентрация, утечка данных или data-snooping.',
        'steps.step6.title': 'Анализ бэктеста и PDF-отчет',
        'steps.step6.desc': 'Интерактивные дашборды + краткое резюме, написанное ИИ. Экспортируйте PDF-отчет с полными метриками и логами сделок для прозрачности.',
        'steps.step7.title': 'Развертывание для живой торговли (Alpaca)',
        'steps.step7.desc': 'Выберите обученную модель, введите ваш API-key и Secret-key Alpaca, выберите демо (paper) или живой режим торговли и нажмите Развернуть. Платформа управляет исполнением, лимитами и занимаетя мониторингом.',
        'reports.title': 'Выдержка из отчета и PnL Alpaca',
        'reports.description': 'Прокрутите вниз, чтобы изучить превью полного отчета, созданного платформой. Нажмите на любое изображение, чтобы увидеть его в деталях.',
        'reports.caption1': 'Выдержка из отчета — резюме и графики',
        'reports.caption2': 'PnL Alpaca — итоговые результаты',
        'telegram.title': 'Связаться со мной в Telegram',
        'telegram.button': 'Ссылка на Telegram'
      }
    };

    let currentLang = 'en';

    function switchLanguage(lang) {
      currentLang = lang;
      document.documentElement.lang = lang;
      const elements = document.querySelectorAll('[data-i18n]');
      elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        const translation = translations[lang][key];
        if (translation) {
          if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
            el.value = translation;
          } else {
            el.innerHTML = translation;
          }
        }
      });

      // Update lang switcher buttons
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
      });

      // Update TQ_STEP_CONTENT if it exists
      updateTQStepContent(lang);

      // Save preference
      localStorage.setItem('preferred-language', lang);
    }

    function updateTQStepContent(lang) {
      if (typeof TQ_STEP_CONTENT !== 'undefined') {
        TQ_STEP_CONTENT = getStepContent(lang);
      }
    }

    function getStepContent(lang) {
      if (lang === 'ru') {
        return {
          0: {
            title: 'Персонализированный онбординг',
            img: 'images/step_0.jpg',
            alt: 'Превью вопросов онбординга',
            desc: 'При регистрации пользователи отвечают на короткий набор особых вопросов: торговые цели (рост, доход, сохранение), предпочитаемые рынки, уровень опыта, толерантность к риску и временной горизонт. TradiQuant использует эти ответы для создания персонализированного профиля рекомендаций, который влияет на предложения выбора моделей ИИ, активов, признаков, пространства поиска гиперпараметров и тоговых стратегий. Это гарантирует, что первая модель, которую вы обучите, будет соответствовать вашим целям — экономит время и снижает входной барьер для значимых экспериментов.',
            meta: 'Почему это важно: Начинает с моделей и настроек, соответствующих вашим целям.'
          },
          1: {
            title: 'Выберите модель ML',
            img: 'images/step_1.jpg',
            alt: 'Экран выбора модели',
            desc: 'Выбирайте из реализованных моделей: классическое ML (XGBoost/LightGBM), последовательные модели (LSTM), архитектуры на основе трансформеров для временных рядов и ансамблевые комбинации (и т.д.). Каждая карточка модели содержит ожидаемую задержку, примеры использования и рекомендуемые предустановки. На основе вашего профиля онбординга мы выделяем модели, наиболее подходящие вашей стратегии и профилю риска.',
            meta: 'Совет: Начните с рекомендуемых предустановок, если не уверены.'
          },
          2: {
            title: 'Выберите активы или портфель',
            img: 'images/step_2.jpg',
            alt: 'Выбор портфеля',
            desc: 'Выбирайте отдельные акции или криптовалюты, импортируйте свой список или мгновенно начинайте с одного из наших отобранных портфелей (Momentum, Balanced, Crypto Basket, Value). Платформа проверяет тикеры и доступность данных, выделяет проблемы диверсификации и предлагает интервалы ребаланса. Наш персонализированный AI-помощник рекомендует активы, соответствующие вашим целям и профилю риска.',
            meta: 'Про-функция: Проверка портфеля и предложения по диверсификации.'
          },
          3: {
            title: 'Выберите признаки (заранее определенные или кастомные)',
            img: 'images/step_3.jpg',
            alt: 'Выбор фич',
            desc: 'Выбирайте из более чем 50 разработанных фич: скользящие средние с разными окнами, RSI, всплески объема, полосы волатильности, макроиндикаторы и кастомные агрегированные сигналы. Каждая фича включает краткое объяснение и рекомендуемый лаг/агрегацию, чтобы избежать смещения lookahead.',
            meta: 'Напоминание: Выбор фич сильно влияет на поведение модели и интерпретируемость.'
          },
          4: {
            title: 'Гиперпараметры — вручную или с помощью ИИ',
            img: 'images/step_4.jpg',
            alt: 'Интерфейс гиперпараметров',
            desc: 'Каждая модель имеет уникальные гиперпараметры. Используйте дефолтные значения, настраивайте параметры вручную или попросите AI-помощника предложить набор гиперпараметров, настроенный под профиль вашего аккаунта и выбранные активы. Предложение ИИ учитывает исторические паттерны производительности и вашу толерантность к риску для рекомендации практической отправной точки.',
            meta: 'AI-помощник: Экономит часы ручной настройки и предотвращает снижает вероятность переобучения.'
          },
          5: {
            title: 'Настройки стратегии и бэктеста',
            img: 'images/step_5.jpg',
            alt: 'Настройки стратегии и бэктеста',
            desc: 'Установите правила исполнения: количество одновременных длинных/коротких позиций, правила размеров позиций (фиксированные, дробные, Kelly), капитал для бэктеста, предположения о комиссиях/проскальзывании и максимальные пределы просадки. Выберите AI-агентов для диагностики результатов бэктеста — они укажут на структурные проблемы, такие как чрезмерная концентрация, утечка данных или data-snooping.',
            meta: 'Настройте торговые правила, соответствующие ограничениям реального исполнения.'
          },
          6: {
            title: 'Анализ бэктеста и PDF-отчет',
            img: 'images/step_6.jpg',
            alt: 'Пример отчета по бэктесту',
            desc: 'После обучения просмотрите комплексный отчет: кривую эквити, просадки, P&L по активам, логи сделок, тепловые карты экспозиции, важность фич и матрицы ошибок. Отчет, написанный ИИ агентами, выделяет сильные стороны, слабости и предлагаемые следующие шаги. Скачивайте PDF отчет, содержащий профессиональную конфигурацию, PnL, alpha, beta и т.д. для комплексного анализа трейдинговой стратегии.',
            meta: 'На этом этапе принимается решение о развертывании обученной модели для живой торговли или продолжении экспериментов.'
          },
          7: {
            title: 'Развертывание для живой торговли (Alpaca)',
            img: 'images/step_7.jpg',
            alt: 'Модальное окно развертывания с ключами Alpaca',
            desc: 'Развертывайте обученные модели на Alpaca за секунды. Выберите демо (paper) или живой режим торговли, вставьте ваш API-key и secret-key Alpaca (хранится безопасно) и нажмите Развернуть. Платформа начнет торговлю на основе обученной модели за вас, так что вы можете мониторить производительность вместо постоянного контроля ордеров.',
            meta: 'Безопасность: API-ключи зашифрованы; демо (paper) режим торговли включен по умолчанию.'
          }
        };
      }
      return {
        0: {
          title: 'Personalized onboarding',
          img: 'images/step_0.jpg',
          alt: 'Onboarding questions preview',
          desc: `At registration users answer a short set of thoughtfully designed questions: trading goals (growth, income, preservation), preferred markets, experience level, risk tolerance, and time horizon. TradiQuant uses these answers to build a personalized recommendation profile that influences model suggestions, feature presets, and hyperparameter search spaces. This ensures the first model you train is aligned with your objectives—saving time and lowering the barrier to meaningful experiments.`,
          meta: 'Why it matters: Gets you started with models & settings that match your goals.'
        },
        1: {
          title: 'Choose an ML model',
          img: 'images/step_1.jpg',
          alt: 'Model selection screen',
          desc: `Select from a curated library: classical ML (XGBoost/LightGBM), sequence models (LSTM), transformer-based architectures for time series, and ensemble combinations. Each model card contains expected latency, sample use-cases, and recommended presets. Based on your onboarding profile we highlight the models most likely to match your strategy and risk profile.`,
          meta: 'Tip: Start with recommended presets if you are unsure.'
        },
        2: {
          title: 'Select assets or a portfolio',
          img: 'images/step_2.jpg',
          alt: 'Portfolio selection',
          desc: `Select individual stocks or cryptocurrencies, import a custom list, or start instantly with one of our curated portfolios (Momentum, Balanced, Crypto Basket, Value). The platform validates tickers and data availability, highlights diversification issues, and suggests rebalance intervals. Our personalized AI assistant recommends assets tailored to your objectives and risk profile.`,
          meta: 'Pro feature: Portfolio validation & diversification suggestions.'
        },
        3: {
          title: 'Choose features (presets or custom)',
          img: 'images/step_3.jpg',
          alt: 'Feature selection',
          desc: `Choose from 50+ engineered features: moving averages at different windows, RSI, volume spikes, volatility bands, macro indicators, and custom aggregated signals. Each feature includes a short explanation and recommended lag/aggregation to avoid lookahead bias.`,
          meta: 'Reminder: Feature choice strongly impacts model behavior and interpretability.'
        },
        4: {
          title: 'Hyperparameters — manual or AI-assisted',
          img: 'images/step_4.jpg',
          alt: 'Hyperparameters UI',
          desc: `Every model exposes relevant hyperparameters. Use quick presets (fast/robust/exploratory), tune parameters manually, or ask the AI Assistant to propose a hyperparameter set tuned to your account profile and selected assets. The AI suggestion considers historical performance patterns and your risk tolerance to recommend a practical starting point.`,
          meta: 'AI Assist: Saves hours of manual tuning and prevents obvious overfitting.'
        },
        5: {
          title: 'Strategy & backtest settings',
          img: 'images/step_5.jpg',
          alt: 'Strategy and backtest settings',
          desc: `Set execution rules: number of concurrent long/short positions, position-sizing rules (fixed, fractional, Kelly), capital for backtest, commission/slippage assumptions, and max drawdown limits. Choose AI Agents to run diagnostics over backtest outputs — they will point out structural issues like over-concentration, lookahead leakage, or data-snooping.`,
          meta: 'Configure trading rules that match real-world execution constraints.'
        },
        6: {
          title: 'Backtest analysis & PDF report',
          img: 'images/step_6.jpg',
          alt: 'Backtest report example',
          desc: `After training, review a comprehensive report: equity curve, drawdowns, per-asset P&L, trade-level logs, exposure heatmaps, feature importance, and confusion matrices. An AI-written executive summary highlights strengths, weaknesses, and suggested next steps. Export a professional PDF containing the config, model hash, seed, and full logs for compliance or investor review.`,
          meta: 'Includes reproducibility info: data snapshot, seed, model checkpoint.'
        },
        7: {
          title: 'Deploy to live trading (Alpaca)',
          img: 'images/step_7.jpg',
          alt: 'Deploy modal with Alpaca keys',
          desc: `Deploy trained models to Alpaca in seconds. Choose paper or live mode, paste your Alpaca API key & secret (stored securely), set runtime risk limits, and press Deploy. The platform manages order execution, monitoring, logging, and a safety circuit breaker (max intraday loss), so you can monitor performance instead of babysitting orders.`,
          meta: 'Security: API keys are encrypted; paper mode enabled by default.'
        }
      };
    }

    const tq = (sel, ctx=document) => ctx.querySelector(sel);
    const tqAll = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

    // focus trap (минимал)
    function trapFocus(container) {
      const focusable = 'a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])';
      const nodes = Array.from(container.querySelectorAll(focusable)).filter(n => !n.disabled);
      if (!nodes.length) return () => {};
      let first = nodes[0], last = nodes[nodes.length-1];
      function keyListener(e){
        if (e.key !== 'Tab') return;
        if (e.shiftKey && document.activeElement === first) {
          e.preventDefault(); last.focus();
        } else if (!e.shiftKey && document.activeElement === last) {
          e.preventDefault(); first.focus();
        }
      }
      document.addEventListener('keydown', keyListener);
      // возвращаем функцию для очистки
      return () => document.removeEventListener('keydown', keyListener);
    }

    // Использование при открытии/закрытии
    let releaseTrap = null;
    function openTQModal(stepIndex, triggerEl) {
      // ...ваш существующий код открытия
      releaseTrap = trapFocus(modal);
      // пометить остальные секции как не-доступные
      document.querySelectorAll('body > *:not(#tq-modal)').forEach(el => el.inert = true);
    }
    function closeTQModal() {
      // ...ваш существующий код закрытия
      if (releaseTrap) releaseTrap();
      document.querySelectorAll('body > *:not(#tq-modal)').forEach(el => el.inert = false);
    }

    tqAll('.tq-step-card').forEach(card=>{
      card.addEventListener('keydown', e=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          card.click();
        }
      });
    });

    let TQ_STEP_CONTENT = getStepContent('en');

    // Initialize language switcher
    document.addEventListener('DOMContentLoaded', function() {
      const savedLang = localStorage.getItem('preferred-language') || 'en';
      switchLanguage(savedLang);

      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const lang = this.getAttribute('data-lang');
          switchLanguage(lang);
        });
      });
    });

    const modal = tq('#tq-modal');
    const modalTitle = tq('#tq-modal-title');
    const modalDesc = tq('#tq-modal-desc');
    const modalImg = tq('#tq-modal-img');
    const modalMeta = tq('#tq-modal-meta');
    const modalActions = tq('#tq-modal-actions');
    const modalCloseBtn = tq('#tq-modal-close');

    let lastFocusedEl = null;

    function openTQModal(stepIndex, triggerEl) {
      const content = TQ_STEP_CONTENT[stepIndex];
      if (!content) return;

      modalTitle.textContent = content.title;
      modalDesc.textContent = content.desc;
      modalImg.src = content.img;
      modalImg.alt = content.alt || content.title;
      modalMeta.textContent = content.meta || '';
      modalActions.innerHTML = '';

      if (stepIndex === 6) {
        const viewBtn = document.createElement('button');
        viewBtn.className = 'tq-btn tq-btn-primary';
        viewBtn.textContent = 'View full report';
        viewBtn.addEventListener('click', ()=> { location.href = '#'; });
        const dlBtn = document.createElement('button');
        dlBtn.className = 'tq-btn';
        dlBtn.textContent = 'Download PDF';
        dlBtn.addEventListener('click', ()=> { location.href = '#'; });
        modalActions.appendChild(viewBtn);
        modalActions.appendChild(dlBtn);
      } else if (stepIndex === 7) {
        const deployBtn = document.createElement('button');
        deployBtn.className = 'tq-btn tq-btn-primary';
        deployBtn.textContent = 'Deploy (Alpaca)';
        deployBtn.addEventListener('click', ()=> { location.href = '#'; });
        const docsBtn = document.createElement('button');
        docsBtn.className = 'tq-btn';
        docsBtn.textContent = 'Deployment docs';
        docsBtn.addEventListener('click', ()=> { location.href = '#'; });
        modalActions.appendChild(deployBtn);
        modalActions.appendChild(docsBtn);
      }

      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');

      lastFocusedEl = triggerEl || document.activeElement;
      modalCloseBtn.focus();

      tqAll('.tq-step-card').forEach(c => c.classList.remove('tq-active'));
      if (triggerEl) triggerEl.classList.add('tq-active');

      document.body.style.overflow = 'hidden';
    }

    function closeTQModal() {
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');

      tqAll('.tq-step-card').forEach(c => c.classList.remove('tq-active'));

      if (lastFocusedEl && typeof lastFocusedEl.focus === 'function') lastFocusedEl.focus();
      lastFocusedEl = null;
      document.body.style.overflow = '';
    }

    tqAll('.tq-step-card').forEach(card=>{
      card.addEventListener('click', (e)=>{
        const step = card.dataset.step;
        openTQModal(step, card);
      });
    });

    modalCloseBtn.addEventListener('click', (e)=> {
      closeTQModal();
    });

    modal.addEventListener('click', (e)=>{
      if (e.target === modal) closeTQModal();
    });

    document.addEventListener('keydown', (e)=>{
      if (e.key === 'Escape' && modal.classList.contains('open')) {
        closeTQModal();
      }
    });

    modalImg.addEventListener('error', ()=> {
      modalImg.src = '';
      modalImg.style.background = '#f5f7ff';
    });
  </script>

</body>
</html>

